<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>User Dashboard</title>
  <link rel="stylesheet" href="/FrontEnd/styles/user_profile.css" />
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <div class="profile-summary">
        <img id="profileImage" src="default.jpg" alt="Profile Photo" />
        <input type="file" id="photoInput" accept="image/*" />
        <button class="upload-btn" onclick="document.getElementById('photoInput').click()">Upload Photo</button>
        <h3 id="displayName"></h3>
      </div>
      <ul class="menu">
        <li class="active">My Account</li>
        <li>My Wishlist</li>
        <li>My Addresses</li>
        <li>Settings</li>
      </ul>
    </div>

    <div class="profile-content">
      <div class="section active">
        <h2>My Account</h2>
        <form id="profileForm">
          <label for="name">Full Name</label>
          <input type="text" id="name" placeholder="Enter Name" />
          <div id="nameError" class="error-message"></div>

          <label for="email">Email Address</label>
          <input type="email" id="email" placeholder="Enter Email" />
          <div id="emailError" class="error-message"></div>

          <label for="bio">Bio</label>
          <textarea id="bio" placeholder="Write something about yourself"></textarea>
          <div id="bioError" class="error-message"></div>

          <button type="submit">Save Profile</button>
        </form>
      </div>

      <div class="section">
        <h2>My Wishlist</h2>
        <input type="text" id="wishlistInput" placeholder="Add new item" />
        <button id="addWishlistBtn">Add to Wishlist</button>
        <ul id="wishlistItems">
          <!-- Wishlist items will appear here -->
        </ul>
        <p id="emptyWishlistMessage">You currently have no items in your wishlist.</p>
      </div>

      <div class="section">
        <h2>My Addresses</h2>
        <p>No addresses saved. Add one through the account settings.</p>
      </div>

      <div class="section">
        <h2>Settings</h2>
        <p>Customize your preferences and change password here.</p>
      </div>
    </div>
  </div>

  <script>
    // Wishlist functionality

    const wishlistInput = document.getElementById('wishlistInput');
    const addWishlistBtn = document.getElementById('addWishlistBtn');
    const wishlistItems = document.getElementById('wishlistItems');
    const emptyWishlistMessage = document.getElementById('emptyWishlistMessage');

    // Load wishlist from localStorage or start with empty array
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];

    function renderWishlist() {
      wishlistItems.innerHTML = ''; // Clear existing list

      if (wishlist.length === 0) {
        emptyWishlistMessage.style.display = 'block';
      } else {
        emptyWishlistMessage.style.display = 'none';
        wishlist.forEach((item, index) => {
          const li = document.createElement('li');
          li.textContent = item;

          // Add a remove button
          const removeBtn = document.createElement('button');
          removeBtn.textContent = 'Remove';
          removeBtn.onclick = () => {
            removeFromWishlist(index);
          };

          li.appendChild(removeBtn);
          wishlistItems.appendChild(li);
        });
      }
    }

    function addToWishlist() {
      const newItem = wishlistInput.value.trim();
      if (newItem === '') {
        alert('Please enter an item to add.');
        return;
      }

      wishlist.push(newItem);
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      wishlistInput.value = '';
      renderWishlist();
    }

    function removeFromWishlist(index) {
      wishlist.splice(index, 1);
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      renderWishlist();
    }

    // Event listener for Add button
    addWishlistBtn.addEventListener('click', addToWishlist);

    // Also add on Enter key for input field
    wishlistInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        addToWishlist();
      }
    });

    // Initial render on page load
    renderWishlist();
  </script>

  <script src="/FrontEnd/scripts/user_profile.js"></script>
</body>
</html>
